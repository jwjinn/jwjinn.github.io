---
title: 헤더, 인터셉터, 쿼터, 스로틀링
description: 
author: joo
date: 24-05-06
categories: [Kafka, Chapter3]
tags: [kafka, Data, Engineering]
pin: true
math: true
mermaid: true

---
> 지금 이 포스팅은 전체적으로 어떠한 코드를 사용하는 것인지를 설명하지는 않습니다.<br>
> 그저, 이것은 무엇인지, 정리하는 글입니다.
{: .prompt-info }


## 카프카의 헤더란?
카프카의 헤더란 키, 밸류를 건들이지 않고 카프카 레코드에 추가 메타데이터를 추가하는 것입니다.

주로 헤더를 활용하는 용도는 메시지의 전달 내역을 기록하는 겁니다.

데이터가 생긴 곳의 정보를 헤더에 저장해 두면, `메시지를 파싱할 필요 없이`

헤더에 심어진 정보만으로 `메시지를 라우팅하거나 출처`를 추적할 수 있는 것이다.

## 카프카의 인터셉터

카프카 클라이언트의 코드를 고치지 않으면서 그 작동을 변경해야 하는 경우에 사용합니다.

### ProducerRecord<K, V> onSend(ProducerRecord<K, V> record)

- 이 메서드는 프로듀서가 레코드를 브로커로 보내기 전, 직렬화되기 직전에 호출된다.

- 이 메서드를 재정의할 때는 보내질 레코드에 담긴 정보를 볼 수 있을 뿐만 아니라 고칠 수도 있습니다.

### void onAcknowledgement(RecordMetadata metadata, Exception exception)

- 이 메서드는 카프카 브로커가 보낸 응답을 클라이언트가 받았을 때 호출됩니다.

- 브로커가 보낸 응답을 변경할 수는 없지만, 그 안에 담긴 정보를 읽습니다.

## 쿼터, 스로틀링

- 카프카 브로커에는 쓰기/읽기 속도를 제한할 수 있는 기능이 있습니다.
