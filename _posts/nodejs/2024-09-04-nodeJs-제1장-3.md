---
title: 1.1.3 이벤트 기반
description: NodeJs의 이벤트 기반을 정리합니다.
date: 24-09-04
categories: [nodeJs, 1장]
tags: [NodeJs]
pin: true
math: true
mermaid: true

---

# 이벤트 기반이란?

이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식을 의미합니다. 이벤트로는 클릭과 네트워크 요청이 있을 수도 있습니다.

## 실행 방식:

코드를 위에서 부터 실행되는 보통의 엔진과 달리 `이벤트 기반`입니다.

따라서, 어떠한 이벤트가 발생할 때 무엇을 할지 미리 등록해둬야 합니다. 

<strong>`이벤트 리스너`, `콜백` 함수를 등록한다.</strong> 라고 말합니다.

- 노드도 이벤트 기반 방식으로 동작하므로, 이벤트가 발생하면 이벤트 리스너에 등록해둔 콜백 함수를 호출합니다.

- <strong>발생한 이벤트가 없거나 발생했던 이벤트를 다 처리하면, 노드는 다음 이벤트가 발생할 때까지 대기합니다.</strong>


- 그림 링크: https://thebook.io/080334/0008/

***

## 이벤트 루프:

여러 이벤트가 동시에 발생했을 때 `어떤 순서로 콜백 함수를 호출`할지를 이벤트 루프가 판단합니다.

```javascript

function first() {
  second();
  console.log('첫 번째');
}
function second() {
  third();
  console.log('두 번째');
}
function third() {
  console.log('세 번째');
}
first();

```

- 그림 링크: https://thebook.io/080334/0009/


> anonymouse 함수는 처음 실행 시의 전역 콘텍스트를 의미합니다. 자바스크립트 코드는 실행 시 기본적으로 전역 콘텍스트 안에서 돌아간다고 생각하는 게 좋습니다.<br>
> '호출 스택'에 들어가는 순서는 anonymous -> first -> second -> third 순입니다.<br>
> 그리고 '스택'이다보니, 실행 순서는 'third' -> second -> first -> anonymous 가 됩니다.

### setTimeout을 사용한 경우

```javascript

function run() { 
  console.log('3초 후 실행');
}
console.log('시작');
setTimeout(run, 3000);
 
console.log('끝');

```

> 단순 스택에서 실행되었다고 한다면, 결과물을 설명하기가 매우 까다롭습니다.

***

## 추상화된 실행 과정을 살펴보자.

-  이벤트 루프: 이벤트 발생 시 호출할 콜백 함수들을 관리하고, 호출된 콜백 함수의 실행 순서를 결정하는 역할을 담당합니다. 노드가 종료될 때까지 이벤트 처리를 위한 작업을 반복하므로 루프(loop)라고 부릅니다.

-  백그라운드: setTimeout 같은 타이머나 이벤트 리스너들이 대기하는 곳입니다. 자바스크립트가 아닌 다른 언어로 작성된 프로그램이라고 봐도 무방하며, 여러 작업이 동시에 실행될 수 있습니다.

-  태스크 큐: 이벤트 발생 후, 백그라운드에서는 태스크 큐로 타이머나 이벤트 리스너의 콜백 함수를 보냅니다. 정해진 순서대로 콜백들이 줄을 서 있으므로 콜백 큐라고도 합니다. 콜백들은 보통 완료된 순서대로 줄을 서 있지만, 특정한 경우 순서가 바뀌기도 합니다.

> 처음 보았을 때를 기준으로는 말들이 너무 어렵다. 뒤에 내용을 다 읽고 이해하면 해당 부분의 말의 뜻을 알수가 있다. 
{: .prompt-info }

### 살행 과정

- 그림1: https://thebook.io/080334/0011/
- 그림2, 3: https://thebook.io/080334/0012/