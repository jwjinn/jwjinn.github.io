---
title: 1.1.4 논블로킹 I/O
description: 
date: 24-09-04
categories: [nodeJs, 1장]
tags: [NodeJs]
pin: true
math: true
mermaid: true

---

## 자바스크립트의 동시 실행

- 기본적으로 자바스크립트는 동시에 실행이 될 수 없습니다.

- 그러나, I/O 작업과 같은 것은 동시에 처리될 수 있습니다. 우리가 이전에 이벤트 루프를 통해서 `백그라운드`에서 실행이 된 것을 기억하고 있을 겁니다.

자바스크립트는 파일 시스템 접근 네트워크 접근과 같은 I/O 요청들은 백그라운드에서 실행을 하게 됩니다.

우리가 호출 스택의 관점에서, 아니 좀 더 코드를 실행을 하는 관점에서는 I/O 요청을 기다리지 않고 실행이 되는 것처럼 보일 겁니다.

우리는 이러한 처리 방식을 `논블로킹`이라고 말하고 반대로 이전 작업이 끝나야만 다음 작업을 수행하는 것은 `블로킹`이라고 말합니다.

### 당연한 시간상의 이득

I/O 작업들은 비동기적으로 백그라운드에서 실행이 되고 태스크 큐로 넘어가게 됩니다.

백그라운드에서는 동시에 실행이 되기에 최대한 활용을 해서 작업 시간을 줄이고 논블로킹 코딩을 해야 합니다.

> 비동기적으로 실행이 된다는 것은 백그라운드로 넘어간 각각의 테스크들이 각자의 역할을 따로 하고 있는 겁니다.
{: .prompt-info }

### 블로킹 코드와 논블로킹 코드의 예시

#### 블로킹 
```javascript

function longRunningTask() {
  // 오래 걸리는 작업
  console.log('작업 끝');
}

console.log('시작');
longRunningTask();
console.log('다음 작업');

```

`longRunningTask()`라는 함수가 엄청나게 시간이 많이 걸리는 작업이라고 가정합시다.

호출 스택에서만 실행이 되기에 `longRunningTask()`함수가 다 실행이 되기 전까지 `console.log('다음 작업');` 이 실행이 되지 않습니다.

위와 같은 방식을 `블로킹`이라고 합니다.

#### 논블로킹

```javascript

function longRunningTask() {
  // 오래 걸리는 작업
  console.log('작업 끝');
}
console.log('시작');
setTimeout(longRunningTask, 0);
console.log('다음 작업');

```

논 블로킹으로 만들기 위한 기법을 사용했습니다. 주로 `setImmediate` 방식을 사용하기는 하지만, 위와 같은 방식으로도 백그라운드로 보내어 논블로킹 처리를 할 수 있습니다.

해당 방식은 I/O 요청 뿐만 아니라, 오래 걸리는 작업을 처리해야 하는 경우 간단한 작업들이 대기하는 상황을 막아주기도 합니다.

그래서, 실행 순서가 중요하지 않고 논블로킹 방식을 채택을 해야 할 경우 위와 같은 방식을 고려할 필요가 있습니다.